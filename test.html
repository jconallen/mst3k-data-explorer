<!DOCTYPE HTML>
<html>

<head>


    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
        integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.11.1/bootstrap-table.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/todc-bootstrap/3.3.7-3.3.13/js/bootstrap.min.js"></script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-modal/2.2.6/js/bootstrap-modalmanager.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.11.1/bootstrap-table.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.0/dist/echarts.min.js"></script>

</head>

<body>

    <div class="container">
        <div id="actors" class="container" style="height: 3000px;"></div>
        <div id="directors" class="container" style="height: 3000px;"></div>
        <div id="writers" class="container" style="height: 3000px;"></div>

    </div>


    <script>


        $(document).ready(function () {
            $.ajax({
                url: "data/crew_data.json",
                dataType: 'json',
                success: buildCharts,
                crossDomain: true
            });
        });

        function buildCharts(data) {

            var actorChartDom = document.getElementById('actors');
            var actorChart = echarts.init(actorChartDom);

            var actorNames = [];
            var actorData = [];
            var sortedData = [];

            for (var crewId in data) {
                crewMember = data[crewId];
                if (crewMember.actor.length > 2) {
                    sortedData.push(crewMember);
                }
            }

            sortedData = sortedData.sort((a, b) => {
                return a.actor.length - b.actor.length;
            });

            for (var crewId in sortedData) {
                console.log(crewMember.name + ": " + crewMember.titles.length);
                crewMember = sortedData[crewId];
                actorNames.push(crewMember.name);
                actorData.push(crewMember.actor.length);
            }

            var option = {
                title: {
                    text: 'Most Actor Appearances'
                },
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'shadow'
                    }
                },
                legend: {},
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis: {
                    type: 'value'
                },
                yAxis: {
                    type: 'category',
                    data: actorNames
                },
                color: ["#5470c6"],
                series: [
                    {
                        itemStyle: {
                            color: "green"
                        },
                        name: 'Actor',
                        type: 'bar',
                        data: actorData
                    }
                ]
            };

            actorChart.setOption(option);

        }


    </script>
</body>

</html>